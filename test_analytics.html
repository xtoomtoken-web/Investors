<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portfolio Analytics Test</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-slate-900 text-white p-8">
    <div class="max-w-4xl mx-auto">
        <h1 class="text-3xl font-bold mb-8">🧪 Portfolio Analytics Test</h1>
        
        <!-- Test Results -->
        <div id="testResults" class="space-y-4">
            <div class="bg-slate-800 rounded-lg p-4">
                <h2 class="text-xl font-semibold mb-4">📊 Test Results</h2>
                <div id="results" class="space-y-2">
                    <!-- Results will be populated here -->
                </div>
            </div>
        </div>

        <!-- Mock Portfolio Analytics Section -->
        <div class="mt-8">
            <h2 class="text-2xl font-bold mb-6">📊 Portfolio Analytics Preview</h2>
            
            <!-- Performance Summary Cards -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
                <div class="bg-gradient-to-r from-cyan-600/20 to-cyan-800/20 rounded-xl p-4 border border-cyan-500/30">
                    <div class="flex items-center justify-between mb-2">
                        <h4 class="text-sm font-semibold text-white">💎 Total Portfolio Value</h4>
                        <div class="text-cyan-400">📈</div>
                    </div>
                    <div class="text-2xl font-bold text-cyan-400">$12,345.67</div>
                    <div class="text-xs text-green-400 mt-1">24h: +5.23%</div>
                </div>

                <div class="bg-gradient-to-r from-emerald-600/20 to-emerald-800/20 rounded-xl p-4 border border-emerald-500/30">
                    <div class="flex items-center justify-between mb-2">
                        <h4 class="text-sm font-semibold text-white">⚡ Best Performer</h4>
                        <div class="text-emerald-400">🏆</div>
                    </div>
                    <div class="text-lg font-bold text-emerald-400">XTOO</div>
                    <div class="text-xs text-gray-400 mt-1">+12.45%</div>
                </div>

                <div class="bg-gradient-to-r from-red-600/20 to-red-800/20 rounded-xl p-4 border border-red-500/30">
                    <div class="flex items-center justify-between mb-2">
                        <h4 class="text-sm font-semibold text-white">📉 Worst Performer</h4>
                        <div class="text-red-400">⚠️</div>
                    </div>
                    <div class="text-lg font-bold text-red-400">WLF</div>
                    <div class="text-xs text-gray-400 mt-1">-3.21%</div>
                </div>

                <div class="bg-gradient-to-r from-purple-600/20 to-purple-800/20 rounded-xl p-4 border border-purple-500/30">
                    <div class="flex items-center justify-between mb-2">
                        <h4 class="text-sm font-semibold text-white">🎯 Diversification</h4>
                        <div class="text-purple-400">📊</div>
                    </div>
                    <div class="text-2xl font-bold text-purple-400">67%</div>
                    <div class="text-xs text-amber-400 mt-1">Moderate Risk</div>
                </div>
            </div>

            <!-- Token Allocation Preview -->
            <div class="bg-gradient-to-r from-indigo-600/20 to-indigo-800/20 rounded-2xl p-6 border border-indigo-500/30">
                <h3 class="text-xl font-bold text-white mb-4">🥧 Token Allocation</h3>
                <div class="space-y-3">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-3 min-w-0 flex-1">
                            <div class="flex-shrink-0">
                                <span class="text-sm font-semibold text-white">XTOO</span>
                            </div>
                            <div class="flex-1 bg-gray-700 rounded-full h-3 overflow-hidden">
                                <div class="bg-gradient-to-r from-blue-500 to-blue-600 h-full transition-all duration-1000" style="width: 45%"></div>
                            </div>
                        </div>
                        <div class="flex-shrink-0 ml-3">
                            <span class="text-sm text-gray-300">45.0%</span>
                        </div>
                    </div>
                    
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-3 min-w-0 flex-1">
                            <div class="flex-shrink-0">
                                <span class="text-sm font-semibold text-white">BNB</span>
                            </div>
                            <div class="flex-1 bg-gray-700 rounded-full h-3 overflow-hidden">
                                <div class="bg-gradient-to-r from-emerald-500 to-emerald-600 h-full transition-all duration-1000" style="width: 30%"></div>
                            </div>
                        </div>
                        <div class="flex-shrink-0 ml-3">
                            <span class="text-sm text-gray-300">30.0%</span>
                        </div>
                    </div>

                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-3 min-w-0 flex-1">
                            <div class="flex-shrink-0">
                                <span class="text-sm font-semibold text-white">ADA</span>
                            </div>
                            <div class="flex-1 bg-gray-700 rounded-full h-3 overflow-hidden">
                                <div class="bg-gradient-to-r from-purple-500 to-purple-600 h-full transition-all duration-1000" style="width: 25%"></div>
                            </div>
                        </div>
                        <div class="flex-shrink-0 ml-3">
                            <span class="text-sm text-gray-300">25.0%</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Test the analytics integration
        document.addEventListener('DOMContentLoaded', function() {
            const resultsContainer = document.getElementById('results');
            
            function addResult(test, status, details = '') {
                const resultDiv = document.createElement('div');
                resultDiv.className = `flex items-center space-x-2 ${status === 'pass' ? 'text-green-400' : status === 'fail' ? 'text-red-400' : 'text-yellow-400'}`;
                resultDiv.innerHTML = `
                    <span>${status === 'pass' ? '✅' : status === 'fail' ? '❌' : '⚠️'}</span>
                    <span><strong>${test}:</strong> ${status.toUpperCase()}</span>
                    ${details ? `<span class="text-gray-400">- ${details}</span>` : ''}
                `;
                resultsContainer.appendChild(resultDiv);
            }

            // Test 1: Check if main dashboard file exists and has analytics section
            fetch('dashboard_investor_cloud.html')
                .then(response => response.text())
                .then(html => {
                    if (html.includes('portfolioAnalytics')) {
                        addResult('Analytics HTML Section', 'pass', 'Portfolio analytics section found in main dashboard');
                    } else {
                        addResult('Analytics HTML Section', 'fail', 'Portfolio analytics section not found');
                    }

                    // Test 2: Check for analytics functions
                    if (html.includes('updatePortfolioAnalytics')) {
                        addResult('Analytics JavaScript Functions', 'pass', 'Portfolio analytics functions found');
                    } else {
                        addResult('Analytics JavaScript Functions', 'fail', 'Analytics functions not found');
                    }

                    // Test 3: Check for chart modal improvements
                    if (html.includes('border-amber-500/50')) {
                        addResult('Chart Modal Styling', 'pass', 'Amber-themed chart modal found');
                    } else {
                        addResult('Chart Modal Styling', 'warn', 'Amber styling may not be applied');
                    }

                    // Test 4: Check for centered buy/sell popup
                    if (html.includes('screenWidth') && html.includes('screenHeight')) {
                        addResult('Buy/Sell Popup Centering', 'pass', 'Centering logic found in buy/sell function');
                    } else {
                        addResult('Buy/Sell Popup Centering', 'warn', 'Centering logic may not be implemented');
                    }

                    // Test 5: Check for refresh analytics button
                    if (html.includes('refreshAnalytics')) {
                        addResult('Refresh Analytics Feature', 'pass', 'Refresh analytics functionality found');
                    } else {
                        addResult('Refresh Analytics Feature', 'fail', 'Refresh analytics not found');
                    }
                })
                .catch(error => {
                    addResult('Dashboard File Access', 'fail', 'Could not access main dashboard file');
                });
        });
    </script>
</body>
</html>